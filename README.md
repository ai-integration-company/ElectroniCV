# Решение команды AI Integration для составления сметы по схеме электрики

## Обзор
Наше решение, разработанное командой AI Integration, фокусируется на создании смет для электрических схем. **Оно принимает изображения, содержащие горизонтальный текст (читаемый слева направо) и вертикальный текст (читаемый снизу вверх)** в соответствии с ГОСТ. Код обучения модели YOLOv10 можно увидеть в файле `yolo-training.ipynb`.

## Тестирование
**Для тестирования рекомендуется использовать нашего развернутого Telegram бота** https://t.me/ekf_schemes_bot. При необходимости проверить код, вы можете запустить ноутбук `ElecroniCV.ipynb` на Kaggle или Google Colab с **использованием мощностей GPU**, потому что локально у Вас не хватит ресурсов для адекватной работы продукта. **Без мощностей фотография может обрабатываться до 20 мин.**

## Запуск ноутбука на Kaggle/Collab для проверки работы модели
Чтобы запустить решение на Kaggle, выполните следующие шаги:
1. Скачайте файл `ElecroniCV.ipynb`.
2. Перейдите в Kaggle/Collab и загрузите ноутбук. **На Kaggle необходимо иметь подтвержденную почту для загрузки библиотек**. 
3. Выберите ускоритель GPU.
4. Последовательно исполняйте ячейки, читая заголовки и комментарии.

### Важно:
При локальном поднятии кнопка для открытия схемы непосредственно в боте **работать НЕ будет**. Там необходимы дополнительные настройки доступа тг бота и развернутый сайт с туннелированием. Вместо этого необходимо скачать файл и просмотреть его вручную.

## Локальная установка
Чтобы запустить решение локально, выполните следующие шаги:
1. Клонируйте репозиторий.
2. В папке `tg-bot` создайте файл с именем `.env`.
3. Добавьте в файл `.env` следующие переменные окружения:

```bash
ML_URL=http://cv:3000/process_image
BOT_TOKEN=7055398405:AAEX7X5OAPRzsTfgu8u_To_TddsKmJV3Z30
WEB_APP_URL=https://codenrock.com/contests/ekf-ai-challenge
```
 4. Выполните следующие команды

 ```bash
docker compose build
docker compose up 
```
 5. Для работы в логах должно быть **cv  | INFO:     Application startup complete**. Это примерно 5-8 минут после выполнения команды docker compose up.
 6. Перейдите в бота https://t.me/electroCVTEST_bot и тестируйте. **Доступ к смете по кнопке работать НЕ будет. Там необходимы дополнительные настройки доступа тг бота и развернутый сайт с туннелированием.** 
